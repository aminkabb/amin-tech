<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amin Tech | Ù…Ù†ØµØ© Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;500;700;900&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#0f172a',
                        accent: '#ef4444',
                        glass: 'rgba(255, 255, 255, 0.1)',
                    },
                    fontFamily: {
                        cairo: ['Cairo', 'sans-serif'],
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-20px)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body { font-family: 'Cairo', sans-serif; background-color: #020617; color: #fff; overflow-x: hidden; }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #ef4444; border-radius: 4px; }

        /* Glassmorphism Classes */
        .glass-panel {
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .glass-card {
            background: linear-gradient(145deg, rgba(30, 41, 59, 0.7), rgba(15, 23, 42, 0.9));
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s ease;
        }
        .glass-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px -10px rgba(239, 68, 68, 0.3);
            border-color: rgba(239, 68, 68, 0.3);
        }

        /* Player Styles */
        .video-container { position: relative; padding-bottom: 56.25%; background: #000; border-radius: 16px; overflow: hidden; box-shadow: 0 0 50px rgba(0,0,0,0.8); border: 1px solid #334155; }
        .video-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; }
        
        .playlist-item { border-right: 3px solid transparent; transition: all 0.2s; }
        .playlist-item:hover { background-color: rgba(255,255,255,0.05); }
        .playlist-item.active { background-color: rgba(239, 68, 68, 0.1); border-right-color: #ef4444; }

        /* Background Blobs */
        .blob {
            position: absolute; filter: blur(80px); opacity: 0.4; z-index: -1;
            animation: float 10s infinite ease-in-out;
        }
    </style>
</head>
<body class="antialiased selection:bg-red-500 selection:text-white">

    <div class="blob bg-blue-600 w-96 h-96 rounded-full top-0 left-0 -translate-x-1/2 -translate-y-1/2"></div>
    <div class="blob bg-red-600 w-80 h-80 rounded-full bottom-0 right-0 translate-x-1/3 translate-y-1/3 animation-delay-2000"></div>

    <div id="video-overlay" class="fixed inset-0 bg-black/95 z-[100] hidden flex flex-col backdrop-blur-xl transition-all duration-300">
        <div class="p-4 flex justify-between items-center border-b border-white/10 glass-panel">
            <button onclick="closePlayer()" class="bg-white/10 hover:bg-red-600 text-white px-5 py-2 rounded-full transition flex items-center gap-2 font-bold text-sm backdrop-blur-md">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
                Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø´ØºÙ„
            </button>
            <div class="text-xl font-black tracking-tighter">Amin<span class="text-red-500">Player</span></div>
        </div>

        <div class="flex-1 overflow-hidden flex flex-col lg:flex-row">
            <div class="flex-1 flex flex-col relative overflow-y-auto p-4 lg:p-6 justify-center">
                <div class="video-container w-full max-w-6xl mx-auto mb-6">
                    <iframe id="main-frame" src="" allow="autoplay; encrypted-media; picture-in-picture" allowfullscreen></iframe>
                </div>
                <div class="max-w-6xl mx-auto w-full">
                    <h1 id="video-title-display" class="text-2xl md:text-3xl font-bold mb-2 text-white">...</h1>
                    <p id="video-desc-display" class="text-slate-400 text-sm leading-relaxed">...</p>
                </div>
            </div>
            
            <div class="w-full lg:w-96 bg-slate-900/50 border-r border-white/5 flex flex-col h-1/3 lg:h-full backdrop-blur-md">
                <div class="p-4 border-b border-white/5">
                    <h3 class="text-white font-bold flex items-center gap-2 text-lg">
                        <span class="w-2 h-6 bg-red-500 rounded-full inline-block"></span>
                        Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¯Ø±ÙˆØ³
                    </h3>
                </div>
                <div id="playlist-items" class="flex-1 overflow-y-auto p-2 space-y-2 custom-scrollbar"></div>
            </div>
        </div>
    </div>

    <nav class="glass-panel sticky top-0 z-40 border-b-0">
        <div class="max-w-7xl mx-auto px-6 h-20 flex justify-between items-center">
            <a href="#" class="text-3xl font-black tracking-tighter text-white">
                Amin<span class="text-transparent bg-clip-text bg-gradient-to-r from-red-500 to-orange-500">Tech</span>
            </a>
            <div class="hidden md:flex gap-8 items-center">
                <a href="#home" class="font-bold text-slate-300 hover:text-white transition">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
                <a href="#courses" class="font-bold text-slate-300 hover:text-white transition">Ø§Ù„ÙƒÙˆØ±Ø³Ø§Øª</a>
                <a href="#contact" class="bg-gradient-to-r from-red-600 to-orange-600 text-white px-6 py-2.5 rounded-full font-bold hover:shadow-[0_0_20px_rgba(239,68,68,0.5)] transition transform hover:-translate-y-0.5">
                    Ø§Ø¨Ø¯Ø§ Ù…Ø´Ø±ÙˆØ¹Ùƒ
                </a>
            </div>
        </div>
    </nav>

    <section id="home" class="relative pt-32 pb-20 px-4 overflow-hidden">
        <div class="max-w-7xl mx-auto text-center relative z-10">
            <div class="inline-block px-4 py-1.5 rounded-full border border-white/10 bg-white/5 backdrop-blur-sm text-sm font-medium text-red-400 mb-6 animate-pulse-slow">
                ğŸš€ Ù…Ù†ØµØ© Ø§Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ø£ÙˆÙ„Ù‰ Ù„Ù„Ø¨Ø±Ù…Ø¬ÙŠØ§Øª
            </div>
            <h1 class="text-5xl md:text-8xl font-black text-white mb-8 leading-tight tracking-tight">
                Ø­ÙˆÙ„ Ø£ÙÙƒØ§Ø±Ùƒ Ù„ÙˆØ§Ù‚Ø¹ <br/>
                <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-purple-400 to-red-500 animate-gradient">Ø±Ù‚Ù…ÙŠ Ù…Ø°Ù‡Ù„</span>
            </h1>
            <p class="text-slate-400 text-xl max-w-2xl mx-auto mb-12 leading-relaxed">
                Ø³ÙˆØ§Ø¡ ÙƒÙ†Øª Ø¹Ø§ÙŠØ² ØªØªØ¹Ù„Ù… Ø¨Ø±Ù…Ø¬Ø© Ù…Ù† Ø§Ù„ØµÙØ± Ø£Ùˆ Ù…Ø­ØªØ§Ø¬ Ø´Ø±ÙƒØ© ØªÙ†ÙØ° Ù…Ø´Ø±ÙˆØ¹ÙƒØŒ Ø¥Ø­Ù†Ø§ Ù‡Ù†Ø§ Ø¹Ø´Ø§Ù†Ùƒ. ÙˆÙŠØ¨ØŒ Ù…ÙˆØ¨Ø§ÙŠÙ„ØŒ ÙˆØ°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø¨Ø£Ø­Ø¯Ø« Ø§Ù„ØªÙ‚Ù†ÙŠØ§Øª.
            </p>
            <div class="flex flex-col sm:flex-row justify-center gap-4">
                <a href="#courses" class="px-8 py-4 rounded-2xl bg-white text-slate-900 font-black hover:bg-slate-200 transition shadow-xl hover:scale-105">
                    ØªØµÙØ­ Ø§Ù„ÙƒÙˆØ±Ø³Ø§Øª ğŸ“š
                </a>
                <a href="#contact" class="px-8 py-4 rounded-2xl bg-white/10 border border-white/10 backdrop-blur-md text-white font-bold hover:bg-white/20 transition hover:scale-105">
                    Ø§Ø·Ù„Ø¨ Ù…Ø´Ø±ÙˆØ¹Ùƒ ğŸ’¼
                </a>
            </div>
        </div>

        <div class="max-w-5xl mx-auto mt-24 glass-panel rounded-3xl p-8 grid grid-cols-3 gap-8 text-center relative z-10">
            <div>
                <div class="text-4xl font-black text-white mb-1">+50</div>
                <div class="text-slate-400 text-sm">Ù…Ø´Ø±ÙˆØ¹ Ù…ÙƒØªÙ…Ù„</div>
            </div>
            <div class="border-r border-l border-white/10">
                <div class="text-4xl font-black text-red-500 mb-1">+1000</div>
                <div class="text-slate-400 text-sm">Ø·Ø§Ù„Ø¨ ÙˆÙ…ØªØ¯Ø±Ø¨</div>
            </div>
            <div>
                <div class="text-4xl font-black text-blue-500 mb-1">100%</div>
                <div class="text-slate-400 text-sm">Ø±Ø¶Ø§ Ø¹Ù…Ù„Ø§Ø¡</div>
            </div>
        </div>
    </section>

    <section id="courses" class="py-24 relative">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between items-end mb-12">
                <div>
                    <h2 class="text-4xl font-black text-white mb-2">Ø£Ø­Ø¯Ø« Ø§Ù„ÙƒÙˆØ±Ø³Ø§Øª</h2>
                    <p class="text-slate-400">ØªØ¹Ù„Ù… Ø¨Ø£Ø­Ø¯Ø« Ø§Ù„Ø·Ø±Ù‚ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</p>
                </div>
                <div class="h-1 w-32 bg-gradient-to-r from-red-600 to-transparent rounded-full"></div>
            </div>

            <div id="loader" class="text-center py-20">
                <div class="w-16 h-16 border-4 border-slate-700 border-t-red-500 rounded-full animate-spin mx-auto"></div>
            </div>

            <div id="courses-grid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 hidden"></div>
        </div>
    </section>

    <section id="contact" class="py-24 relative overflow-hidden">
        <div class="absolute inset-0 bg-gradient-to-b from-transparent to-slate-900/80"></div>
        <div class="max-w-4xl mx-auto px-4 relative z-10">
            <div class="glass-card rounded-3xl p-8 md:p-12 text-center border border-white/10">
                <h2 class="text-4xl font-black text-white mb-4">Ø¬Ø§Ù‡Ø² ØªØ¨Ø¯Ø£ Ù…Ø´Ø±ÙˆØ¹ÙƒØŸ</h2>
                <p class="text-slate-400 mb-10">Ø§Ù…Ù„Ø£ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆÙ‡Ù†ØªÙˆØ§ØµÙ„ Ù…Ø¹Ø§Ùƒ ÙÙŠ Ø£Ø³Ø±Ø¹ ÙˆÙ‚Øª Ù„ØªÙ†ÙÙŠØ° ÙÙƒØ±ØªÙƒ</p>

                <form id="hire-form" class="space-y-4 max-w-2xl mx-auto text-right">
                    <div class="grid md:grid-cols-2 gap-4">
                        <input type="text" id="clientName" required class="w-full px-6 py-4 rounded-xl bg-slate-800/50 border border-white/10 text-white placeholder-slate-500 focus:outline-none focus:border-red-500 focus:bg-slate-800 transition" placeholder="Ø§Ù„Ø§Ø³Ù… Ø¨Ø§Ù„ÙƒØ§Ù…Ù„">
                        <input type="tel" id="clientPhone" required class="w-full px-6 py-4 rounded-xl bg-slate-800/50 border border-white/10 text-white placeholder-slate-500 focus:outline-none focus:border-red-500 focus:bg-slate-800 transition" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ">
                    </div>
                    <select id="serviceType" class="w-full px-6 py-4 rounded-xl bg-slate-800/50 border border-white/10 text-white focus:outline-none focus:border-red-500 focus:bg-slate-800 transition cursor-pointer">
                        <option class="bg-slate-900" value="Web">ğŸ›  ØªØ·ÙˆÙŠØ± Ù…ÙˆØ§Ù‚Ø¹ ÙˆÙŠØ¨</option>
                        <option class="bg-slate-900" value="Mobile">ğŸ“± ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ù…ÙˆØ¨Ø§ÙŠÙ„ (Flutter)</option>
                        <option class="bg-slate-900" value="AI">ğŸ¤– Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</option>
                        <option class="bg-slate-900" value="Other">âœ¨ Ø£Ø®Ø±Ù‰</option>
                    </select>
                    <textarea id="projectDetails" rows="4" required class="w-full px-6 py-4 rounded-xl bg-slate-800/50 border border-white/10 text-white placeholder-slate-500 focus:outline-none focus:border-red-500 focus:bg-slate-800 transition" placeholder="Ø§Ø­ÙƒÙŠÙ„Ù†Ø§ Ø¹Ù† ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹..."></textarea>
                    
                    <button type="submit" class="w-full bg-gradient-to-r from-red-600 to-orange-600 text-white font-bold py-4 rounded-xl hover:shadow-lg hover:shadow-red-900/40 transition transform hover:scale-[1.02]">
                        Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù† ğŸš€
                    </button>
                </form>

                <div id="form-msg" class="hidden mt-6 p-4 rounded-xl bg-green-500/10 border border-green-500/50 text-green-400 font-bold animate-pulse">
                    âœ… ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­! Ø³ÙŠØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹.
                </div>
            </div>
        </div>
    </section>

    <footer class="bg-black/50 backdrop-blur border-t border-white/5 py-12 text-center">
        <h3 class="text-2xl font-black text-white mb-4">Amin<span class="text-red-600">Tech</span></h3>
        <div class="flex justify-center gap-6 mb-8 text-slate-400">
            <a href="#" class="hover:text-white transition">LinkedIn</a>
            <a href="#" class="hover:text-white transition">GitHub</a>
            <a href="#" class="hover:text-white transition">Facebook</a>
        </div>
        <p class="text-sm text-slate-600">Â© 2025 Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</p>
    </footer>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, getDocs, query, where, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCI49mQ4v0xRO1RsbiAD23VLZEvzqZI3IE",
            authDomain: "myquizapp-f2686.firebaseapp.com",
            projectId: "myquizapp-f2686",
            storageBucket: "myquizapp-f2686.firebasestorage.app",
            messagingSenderId: "351586926960",
            appId: "1:351586926960:web:53182b527996af6fd9cfb5"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        let allVideos = [];

        signInAnonymously(auth).then(() => { loadCourses(); });

        // --- Ø§Ù„Ø¬ÙˆÙƒØ±: ØªØ´ØºÙŠÙ„ ÙŠÙˆØªÙŠÙˆØ¨ ÙˆØ¯Ø±Ø§ÙŠÙ ---
        function getEmbedUrl(url) {
            if (!url) return "";
            if (url.includes("youtube.com") || url.includes("youtu.be")) {
                const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/;
                const match = url.match(regExp);
                const vidId = (match && match[2].length === 11) ? match[2] : null;
                return vidId ? `https://www.youtube.com/embed/${vidId}?autoplay=1&rel=0` : "";
            }
            if (url.includes("drive.google.com")) {
                return url.replace(/\/view.*/, "/preview").replace(/\/file\/d\/(.*?)\/.*/, "/file/d/$1/preview");
            }
            return url;
        }

        // --- ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙƒÙˆØ±Ø³Ø§Øª Ø¨Ø´ÙƒÙ„ Ø§Ø­ØªØ±Ø§ÙÙŠ ---
        async function loadCourses() {
            const grid = document.getElementById('courses-grid');
            const loader = document.getElementById('loader');
            try {
                const snap = await getDocs(query(collection(db, "courses")));
                let html = '';
                
                if(snap.empty) {
                    html = '<div class="col-span-3 text-center text-slate-500 py-10">Ù„Ø§ ØªÙˆØ¬Ø¯ ÙƒÙˆØ±Ø³Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹</div>';
                } else {
                    snap.forEach(doc => {
                        const data = doc.data();
                        html += `
                        <div class="glass-card rounded-2xl overflow-hidden group flex flex-col h-full">
                            <div class="relative h-56 overflow-hidden">
                                <div class="absolute inset-0 bg-gradient-to-t from-slate-900 to-transparent z-10 opacity-60"></div>
                                <img src="${data.image}" class="w-full h-full object-cover transform group-hover:scale-110 transition duration-700" onerror="this.src='https://via.placeholder.com/500x300/1e293b/ffffff?text=AminTech'">
                                <span class="absolute top-4 right-4 bg-red-600/90 backdrop-blur text-white text-xs px-3 py-1 rounded-full font-bold shadow-lg z-20 border border-red-400/30">
                                    ${data.category || 'Course'}
                                </span>
                            </div>
                            <div class="p-6 flex flex-col flex-1 relative z-20">
                                <h3 class="text-xl font-bold text-white mb-2 group-hover:text-red-400 transition">${data.title}</h3>
                                <p class="text-slate-400 text-sm mb-6 flex-1 line-clamp-3">${data.desc || 'ØªØ¹Ù„Ù… Ø§Ù„Ø¢Ù† Ø¨Ø£ÙØ¶Ù„ Ø¬ÙˆØ¯Ø©...'}</p>
                                <button onclick="openPlayer('${data.id}', '${data.title}')" class="w-full py-3.5 rounded-xl bg-white/5 border border-white/10 text-white font-bold hover:bg-red-600 hover:border-red-600 transition flex items-center justify-center gap-2 group-hover:shadow-lg">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"/></svg>
                                    Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø©
                                </button>
                            </div>
                        </div>`;
                    });
                }
                grid.innerHTML = html;
                loader.classList.add('hidden');
                grid.classList.remove('hidden');
            } catch (e) { console.error(e); }
        }

        // --- Ù…Ø´ØºÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ---
        window.openPlayer = async function(courseId, courseTitle) {
            const overlay = document.getElementById('video-overlay');
            overlay.classList.remove('hidden');
            setTimeout(() => overlay.classList.remove('opacity-0'), 10); // Fade in effect
            document.body.style.overflow = 'hidden';
            
            document.getElementById('course-title-display').innerText = courseTitle;
            const list = document.getElementById('playlist-items');
            list.innerHTML = '<div class="text-center py-10 text-slate-500 animate-pulse">Ø¬Ø§Ø±ÙŠ ØªØ­Ø¶ÙŠØ± Ø§Ù„Ù…Ø­ØªÙˆÙ‰...</div>';

            try {
                let q = courseId ? query(collection(db, "videos"), where("courseId", "==", courseId)) : query(collection(db, "videos"));
                const snap = await getDocs(q);
                allVideos = [];
                snap.forEach(doc => allVideos.push(doc.data()));

                if (allVideos.length === 0) {
                    list.innerHTML = `<div class="text-center py-10 px-4 text-slate-500 bg-white/5 rounded-lg border border-dashed border-white/10 mx-2">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¯Ø±ÙˆØ³ Ù…ØªØ§Ø­Ø© Ø­Ø§Ù„ÙŠØ§Ù‹.</div>`;
                    document.getElementById('main-frame').src = '';
                } else {
                    list.innerHTML = allVideos.map((vid, idx) => `
                        <div onclick="playVideo(${idx})" class="playlist-item p-4 flex gap-4 cursor-pointer group rounded-xl mx-1 bg-white/5 border border-white/5 hover:border-white/20 hover:bg-white/10 transition-all">
                            <div class="w-8 h-8 rounded-full bg-slate-800 flex items-center justify-center text-slate-400 text-xs font-bold border border-slate-700 group-hover:border-red-500 group-hover:text-red-500 transition">
                                ${idx + 1}
                            </div>
                            <div class="flex-1 min-w-0">
                                <h4 class="text-slate-300 font-bold text-sm line-clamp-1 group-hover:text-white transition">${vid.title}</h4>
                                <span class="text-xs text-slate-500 mt-1 block flex items-center gap-1">
                                    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                                    ${vid.duration || '00:00'}
                                </span>
                            </div>
                        </div>
                    `).join('');
                    playVideo(0);
                }
            } catch(e) { console.error(e); }
        };

        window.playVideo = function(idx) {
            const vid = allVideos[idx];
            if(!vid) return;

            document.getElementById('video-title-display').innerText = vid.title;
            document.getElementById('video-desc-display').innerText = vid.desc || '';
            
            document.querySelectorAll('.playlist-item').forEach((el, i) => {
                if(i === idx) el.classList.add('active');
                else el.classList.remove('active');
            });

            const finalLink = getEmbedUrl(vid.youtubeId);
            const frame = document.getElementById('main-frame');
            if(finalLink) frame.src = finalLink;
        };

        window.closePlayer = function() {
            const overlay = document.getElementById('video-overlay');
            overlay.classList.add('hidden'); // Hide immediately or add fade out logic
            document.body.style.overflow = 'auto';
            document.getElementById('main-frame').src = '';
        };

        // --- Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª ---
        document.getElementById('hire-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const msg = document.getElementById('form-msg');
            const btn = e.target.querySelector('button');
            const originalText = btn.innerHTML;
            
            btn.innerHTML = `<span class="animate-spin inline-block mr-2">â³</span> Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...`;
            btn.disabled = true;
            btn.classList.add('opacity-70');
            
            try {
                await addDoc(collection(db, "service_requests"), {
                    name: document.getElementById('clientName').value,
                    phone: document.getElementById('clientPhone').value,
                    service: document.getElementById('serviceType').value,
                    details: document.getElementById('projectDetails').value,
                    status: 'new',
                    timestamp: serverTimestamp()
                });
                msg.classList.remove('hidden');
                e.target.reset();
                setTimeout(() => {
                    msg.classList.add('hidden');
                    btn.innerHTML = originalText;
                    btn.disabled = false;
                    btn.classList.remove('opacity-70');
                }, 4000);
            } catch(err) {
                console.error(err);
                btn.innerHTML = "Ø­Ø¯Ø« Ø®Ø·Ø£ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰";
                btn.disabled = false;
            }
        });
    </script>
</body>
</html>
